webpackJsonp([2,0,3],{0:function(t,e,a){"use strict";a(241),a(242);var n=a(423),s=u(a(88)),r=u(a(395)),o=u(a(156)),i=u(a(154));function u(t){return t&&t.__esModule?t:{default:t}}(0,n.sync)(o.default,i.default),new s.default({el:"#app",template:"<App/>",components:{App:r.default},store:o.default,router:i.default})},10:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SET_SEARCH_DATASETS_SUCCESS="datasets/SET_SEARCH_DATASETS_SUCCESS",e.SET_SEARCH_DATASETS_ERROR="datasets/SET_SEARCH_DATASETS_ERROR",e.SET_SEARCH_DATASETS_LOADING="datasets/SET_SEARCH_DATASETS_LOADING",e.SET_SEARCH_DATASETS_QUERY="datasets/SET_SEARCH_DATASETS_QUERY",e.SET_SEARCH_DATASETS_FILTERS="datasets/SET_SEARCH_DATASETS_FILTERS",e.SET_FEATURED_DATASETS_SUCCESS="datasets/SET_FEATURED_DATASETS_SUCCESS",e.SET_FEATURED_DATASETS_ERROR="datasets/SET_FEATURED_DATASETS_ERROR",e.SET_FEATURED_DATASETS_LOADING="datasets/SET_FEATURED_DATASETS_LOADING",e.SET_SELECTED_DATASET_SUCCESS="datasets/SET_SELECTED_DATASET_SUCCESS",e.SET_SELECTED_DATASET_ERROR="datasets/SET_SELECTED_DATASET_ERROR",e.SET_SELECTED_DATASET_LOADING="datasets/SET_SELECTED_DATASET_LOADING",e.ADD_RECENT_DATASETS="datasets/ADD_RECENT_DATASETS",e.SET_MODAL="modal/SET_MODAL",e.SET_TOKEN="modal/SET_TOKEN",e.SET_CARTO_LAYER_SLUG_SUCCESS="layers/SET_CARTO_LAYER_SLUG_SUCCESS",e.SET_CARTO_LAYER_SUCCESS="layers/SET_CARTO_LAYER_SUCCESS",e.SET_CARTO_LAYER_ERROR="layers/SET_CARTO_LAYER_ERROR",e.SET_CARTO_LAYER_LOADING="layers/SET_CARTO_LAYER_LOADING",e.SET_CARTO_MARKERS_LAYER_SUCCESS="layers/SET_CARTO_MARKERS_LAYER_SUCCESS",e.SET_CARTO_MARKERS_LAYER_ERROR="layers/SET_CARTO_MARKERS_LAYER_ERROR",e.SET_CARTO_MARKERS_LAYER_LOADING="layers/SET_CARTO_MARKERS_LAYER_LOADING",e.SET_CARTO_CLUSTER_LAYER_SUCCESS="layers/SET_CARTO_CLUSTER_LAYER_SUCCESS",e.SET_CARTO_CLUSTER_LAYER_ERROR="layers/SET_CARTO_CLUSTER_LAYER_ERROR",e.SET_CARTO_CLUSTER_LAYER_LOADING="layers/SET_CARTO_CLUSTER_LAYER_LOADING",e.RESET_CARTO_LAYER_OPTIONS="layers/RESET_CARTO_LAYER_OPTIONS",e.SET_WATER_LAYER_SUCCESS="water-layers/SET_LAYER_SUCCESS",e.SET_WATER_LAYER_ERROR="water-layers/SET_LAYER_ERROR",e.SET_WATER_LAYER_LOADING="water-layers/SET_LAYER_LOADING",e.SET_WATER_LAYERS_ACTIVE="water-layers/SET_WATER_LAYERS_ACTIVE",e.SET_BASINS_SUCCESS="water-layers/SET_BASINS_SUCCESS",e.SET_BASINS_ERROR="water-layers/SET_BASINS_ERROR",e.SET_BASINS_LOADING="water-layers/SET_BASINS_LOADING",e.SET_TWITTER_SLIDES_SUCCESS="twitter/SET_TWITTER_SLIDES_SUCCESS",e.SET_TWITTER_SLIDES_ERROR="twitter/SET_TWITTER_SLIDES_ERROR",e.SET_TWITTER_SLIDES_LOADING="twitter/SET_TWITTER_SLIDES_LOADING"},55:function(t,e,a){var n,s;a(254),n=a(169);var r=a(417);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,t.exports=n},112:function(t,e){},148:function(t,e,a){var n,s;a(250),n=a(168);var r=a(413);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,t.exports=n},149:function(t,e,a){var n,s;a(247),n=a(171);var r=a(410);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,t.exports=n},150:function(t,e,a){var n,s;a(251),n=a(179);var r=a(414);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,t.exports=n},151:function(t,e,a){var n,s;a(258),n=a(180);var r=a(421);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,t.exports=n},152:function(t,e,a){"use strict";var n,s=a(185),r=(n=s)&&n.__esModule?n:{default:n};var o,i=function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);function n(){this.constructor=t}t.prototype=null===e?(0,r.default)(e):(n.prototype=e.prototype,new n)};!function(t){var e=function(){return function(){}}();t.Point=e;var a=function(){return function(){}}();t.ClusterObject=a;var n=1,s=Math.pow(2,53)-1,r=function(t){function e(e,a,s,r,o,i){void 0===s&&(s={}),void 0===o&&(o=1),void 0===i&&(i=!1),t.call(this),this.data=s,this.position={lat:+e,lng:+a},this.weight=o,this.category=r,this.filtered=i,this.hashCode=n++}return i(e,t),e.prototype.Move=function(t,e){this.position.lat=+t,this.position.lng=+e},e.prototype.SetData=function(t){for(var e in t)this.data[e]=t[e]},e}(a);t.Marker=r;var o=function(t){function e(a){if(t.call(this),this.stats=[0,0,0,0,0,0,0,0],this.data={},!a)return this.hashCode=1,void(e.ENABLE_MARKERS_LIST&&(this._clusterMarkers=[]));e.ENABLE_MARKERS_LIST&&(this._clusterMarkers=[a]),this.lastMarker=a,this.hashCode=31+a.hashCode,this.population=1,void 0!==a.category&&(this.stats[a.category]=1),this.totalWeight=a.weight,this.position={lat:a.position.lat,lng:a.position.lng},this.averagePosition={lat:a.position.lat,lng:a.position.lng}}return i(e,t),e.prototype.AddMarker=function(t){e.ENABLE_MARKERS_LIST&&this._clusterMarkers.push(t);var a=this.hashCode;a=(a<<5)-a+t.hashCode,this.hashCode=a>=s?a%s:a,this.lastMarker=t;var n=t.weight,r=this.totalWeight,o=n+r;this.averagePosition.lat=(this.averagePosition.lat*r+t.position.lat*n)/o,this.averagePosition.lng=(this.averagePosition.lng*r+t.position.lng*n)/o,++this.population,this.totalWeight=o,void 0!==t.category&&(this.stats[t.category]=this.stats[t.category]+1||1)},e.prototype.Reset=function(){this.hashCode=1,this.lastMarker=void 0,this.population=0,this.totalWeight=0,this.stats=[0,0,0,0,0,0,0,0],e.ENABLE_MARKERS_LIST&&(this._clusterMarkers=[])},e.prototype.ComputeBounds=function(t){var e=t.Project(this.position.lat,this.position.lng),a=t.Size,n=Math.floor(e.x/a)*a,s=Math.floor(e.y/a)*a,r=t.UnProject(n,s),o=t.UnProject(n+a,s+a);this.bounds={minLat:o.lat,maxLat:r.lat,minLng:r.lng,maxLng:o.lng}},e.prototype.GetClusterMarkers=function(){return this._clusterMarkers},e.prototype.ApplyCluster=function(t){this.hashCode=41*this.hashCode+43*t.hashCode,this.hashCode>s&&(this.hashCode=this.hashCode=s);var a=t.totalWeight,n=this.totalWeight,r=a+n;for(var o in this.averagePosition.lat=(this.averagePosition.lat*n+t.averagePosition.lat*a)/r,this.averagePosition.lng=(this.averagePosition.lng*n+t.averagePosition.lng*a)/r,this.population+=t.population,this.totalWeight=r,this.bounds.minLat=Math.min(this.bounds.minLat,t.bounds.minLat),this.bounds.minLng=Math.min(this.bounds.minLng,t.bounds.minLng),this.bounds.maxLat=Math.max(this.bounds.maxLat,t.bounds.maxLat),this.bounds.maxLng=Math.max(this.bounds.maxLng,t.bounds.maxLng),t.stats)t.stats.hasOwnProperty(o)&&(this.stats.hasOwnProperty(o)?this.stats[o]+=t.stats[o]:this.stats[o]=t.stats[o]);e.ENABLE_MARKERS_LIST&&(this._clusterMarkers=this._clusterMarkers.concat(t.GetClusterMarkers()))},e.ENABLE_MARKERS_LIST=!1,e}(a);function u(t){for(var e,a,n,s=1,r=t.length;s<r;++s){for(n=(a=t[s]).position.lng,e=s-1;e>=0&&t[e].position.lng>n;--e)t[e+1]=t[e];t[e+1]=a}}t.Cluster=o;var l=function(){function t(){this._markers=[],this._nbChanges=0,this._clusters=[],this.Size=166,this.ViewPadding=.2}return t.prototype.RegisterMarker=function(t){t._removeFlag&&delete t._removeFlag,this._markers.push(t),this._nbChanges+=1},t.prototype.RegisterMarkers=function(t){var e=this;t.forEach(function(t){e.RegisterMarker(t)})},t.prototype._sortMarkers=function(){var t,e,a=this._markers,n=a.length;this._nbChanges&&(t=n,(e=this._nbChanges)>300||!(e/t<.2))?this._markers.sort(function(t,e){return t.position.lng-e.position.lng}):u(a),this._nbChanges=0},t.prototype._sortClusters=function(){u(this._clusters)},t.prototype._indexLowerBoundLng=function(t){for(var e,a,n=this._markers,s=0,r=n.length;r>0;)n[e=s+(a=Math.floor(r/2))].position.lng<t?(s=++e,r-=a+1):r=a;return s},t.prototype._resetClusterViews=function(){for(var t=0,e=this._clusters.length;t<e;++t){var a=this._clusters[t];a.Reset(),a.ComputeBounds(this)}},t.prototype.ProcessView=function(t){var e=Math.abs(t.maxLat-t.minLat)*this.ViewPadding,a=Math.abs(t.maxLng-t.minLng)*this.ViewPadding,n={minLat:t.minLat-e-e,maxLat:t.maxLat+e+e,minLng:t.minLng-a-a,maxLng:t.maxLng+a+a};this._sortMarkers(),this._resetClusterViews();for(var s,r,i=this._indexLowerBoundLng(n.minLng),u=this._markers,l=this._clusters,c=l.slice(0),d=i,f=u.length;d<f;++d){var _=u[d],h=_.position;if(h.lng>n.maxLng)break;if(h.lat>n.minLat&&h.lat<n.maxLat&&!_.filtered){for(var p,m=!1,E=0,S=c.length;E<S;++E)if((p=c[E]).bounds.maxLng<_.position.lng)c.splice(E,1),--E,--S;else if(s=h,r=p.bounds,s.lat>=r.minLat&&s.lat<=r.maxLat&&s.lng>=r.minLng&&s.lng<=r.maxLng){p.AddMarker(_),m=!0;break}m||((p=new o(_)).ComputeBounds(this),l.push(p),c.push(p))}}var g=[];for(d=0,f=l.length;d<f;++d)(p=l[d]).population>0&&g.push(p);return this._clusters=g,this._sortClusters(),this._clusters},t.prototype.RemoveMarkers=function(t){if(t){for(var e=0,a=t.length;e<a;++e)t[e]._removeFlag=!0;var n=[];for(e=0,a=this._markers.length;e<a;++e)this._markers[e]._removeFlag||n.push(this._markers[e]);this._markers=n}else this._markers=[]},t.prototype.FindMarkersInArea=function(t){for(var e=t.minLat,a=t.maxLat,n=t.minLng,s=t.maxLng,r=this._markers,o=[],i=this._indexLowerBoundLng(n),u=r.length;i<u;++i){var l=r[i].position;if(l.lng>s)break;l.lat>=e&&l.lat<=a&&l.lng>=n&&o.push(r[i])}return o},t.prototype.ComputeBounds=function(t,e){if(void 0===e&&(e=!0),!t||!t.length)return null;for(var a=Number.MAX_VALUE,n=-Number.MAX_VALUE,s=Number.MAX_VALUE,r=-Number.MAX_VALUE,o=0,i=t.length;o<i;++o)if(e||!t[o].filtered){var u=t[o].position;u.lat<a&&(a=u.lat),u.lat>n&&(n=u.lat),u.lng<s&&(s=u.lng),u.lng>r&&(r=u.lng)}return{minLat:a,maxLat:n,minLng:s,maxLng:r}},t.prototype.FindMarkersBoundsInArea=function(t){return this.ComputeBounds(this.FindMarkersInArea(t))},t.prototype.ComputeGlobalBounds=function(t){return void 0===t&&(t=!0),this.ComputeBounds(this._markers,t)},t.prototype.GetMarkers=function(){return this._markers},t.prototype.GetPopulation=function(){return this._markers.length},t.prototype.ResetClusters=function(){this._clusters=[]},t}();t.PruneCluster=l}(o||(o={})),o||(o={});var u=(L.Layer?L.Layer:L.Class).extend({initialize:function(t,e){var a=this;void 0===t&&(t=120),void 0===e&&(e=20),this.Cluster=new o.PruneCluster,this.Cluster.Size=t,this.clusterMargin=Math.min(e,t/4),this.Cluster.Project=function(t,e){return a._map.project(new L.LatLng(t,e),Math.floor(a._map.getZoom()))},this.Cluster.UnProject=function(t,e){return a._map.unproject(new L.Point(t,e),Math.floor(a._map.getZoom()))},this._objectsOnMap=[],this.spiderfier=new l(this),this._hardMove=!1,this._resetIcons=!1,this._removeTimeoutId=0,this._markersRemoveListTimeout=[]},RegisterMarker:function(t){this.Cluster.RegisterMarker(t)},RegisterMarkers:function(t){this.Cluster.RegisterMarkers(t)},RemoveMarkers:function(t){this.Cluster.RemoveMarkers(t)},BuildLeafletCluster:function(t,e){var a=this,n=new L.Marker(e,{icon:this.BuildLeafletClusterIcon(t)});return n._leafletClusterBounds=t.bounds,n.on("click",function(){var t=n._leafletClusterBounds,e=a.Cluster.FindMarkersInArea(t),s=a.Cluster.ComputeBounds(e);if(s){var r=new L.LatLngBounds(new L.LatLng(s.minLat,s.maxLng),new L.LatLng(s.maxLat,s.minLng)),o=a._map.getZoom(),i=a._map.getBoundsZoom(r,!1,new L.Point(20,20));if(i===o){for(var u=[],l=0,c=a._objectsOnMap.length;l<c;++l){var d=a._objectsOnMap[l];d.data._leafletMarker!==n&&d.bounds.minLat>=t.minLat&&d.bounds.maxLat<=t.maxLat&&d.bounds.minLng>=t.minLng&&d.bounds.maxLng<=t.maxLng&&u.push(d.bounds)}if(u.length>0){var f=[],_=u.length;for(l=0,c=e.length;l<c;++l){for(var h=e[l].position,p=!1,m=0;m<_;++m){var E=u[m];if(h.lat>=E.minLat&&h.lat<=E.maxLat&&h.lng>=E.minLng&&h.lng<=E.maxLng){p=!0;break}}p||f.push(e[l])}e=f}e.length<200?a._map.fire("overlappingmarkers",{cluster:a,markers:e,center:n.getLatLng(),marker:n}):i<a._map.getMaxZoom()&&i++,a._map.setView(n.getLatLng(),i)}else a._map.fitBounds(r)}}),n},BuildLeafletClusterIcon:function(t){var e="prunecluster prunecluster-",a=38,n=this.Cluster.GetPopulation();return t.population<Math.max(10,.01*n)?e+="small":t.population<Math.max(100,.05*n)?(e+="medium",a=40):(e+="large",a=44),new L.DivIcon({html:"<div><span>"+t.population+"</span></div>",className:e,iconSize:L.point(a,a)})},BuildLeafletMarker:function(t,e){var a=new L.Marker(e);return this.PrepareLeafletMarker(a,t.data,t.category),a},PrepareLeafletMarker:function(t,e,a){if(e.icon&&("function"==typeof e.icon?t.setIcon(e.icon(e,a)):t.setIcon(e.icon)),e.popup){var n="function"==typeof e.popup?e.popup(e,a):e.popup;t.getPopup()?t.setPopupContent(n,e.popupOptions):t.bindPopup(n,e.popupOptions)}},onAdd:function(t){this._map=t,t.on("movestart",this._moveStart,this),t.on("moveend",this._moveEnd,this),t.on("zoomend",this._zoomStart,this),t.on("zoomend",this._zoomEnd,this),this.ProcessView(),t.addLayer(this.spiderfier)},onRemove:function(t){t.off("movestart",this._moveStart,this),t.off("moveend",this._moveEnd,this),t.off("zoomend",this._zoomStart,this),t.off("zoomend",this._zoomEnd,this);for(var e=0,a=this._objectsOnMap.length;e<a;++e)t.removeLayer(this._objectsOnMap[e].data._leafletMarker);this._objectsOnMap=[],this.Cluster.ResetClusters(),t.removeLayer(this.spiderfier),this._map=null},_moveStart:function(){this._moveInProgress=!0},_moveEnd:function(t){this._moveInProgress=!1,this._hardMove=t.hard,this.ProcessView()},_zoomStart:function(){this._zoomInProgress=!0},_zoomEnd:function(){this._zoomInProgress=!1,this.ProcessView()},ProcessView:function(){var t=this;if(this._map&&!this._zoomInProgress&&!this._moveInProgress){for(var e=this._map,a=e.getBounds(),n=Math.floor(e.getZoom()),s=this.clusterMargin/this.Cluster.Size,r=this._resetIcons,o=a.getSouthWest(),i=a.getNorthEast(),u=this.Cluster.ProcessView({minLat:o.lat,minLng:o.lng,maxLat:i.lat,maxLng:i.lng}),l=this._objectsOnMap,c=[],d=new Array(l.length),f=0,_=l.length;f<_;++f){var h=l[f].data._leafletMarker;d[f]=h,h._removeFromMap=!0}var p=[],m=[],E=[],S=[];for(f=0,_=u.length;f<_;++f){for(var g=u[f],v=g.data,T=(g.bounds.maxLat-g.bounds.minLat)*s,y=(g.bounds.maxLng-g.bounds.minLng)*s,C=0,R=S.length;C<R;++C){var A=S[C];if(A.bounds.maxLng<g.bounds.minLng)S.splice(C,1),--C,--R;else{var b=A.averagePosition.lng+y,w=A.averagePosition.lat-T,O=A.averagePosition.lat+T,M=g.averagePosition.lng-y,D=g.averagePosition.lat-T,k=g.averagePosition.lat+T;if(b>M&&O>D&&w<k){v._leafletCollision=!0,A.ApplyCluster(g);break}}}v._leafletCollision||S.push(g)}for(u.forEach(function(e){var a=void 0,s=e.data;if(s._leafletCollision)return s._leafletCollision=!1,s._leafletOldPopulation=0,void(s._leafletOldHashCode=0);var o=new L.LatLng(e.averagePosition.lat,e.averagePosition.lng),i=s._leafletMarker;if(i)if(1===e.population&&1===s._leafletOldPopulation&&e.hashCode===i._hashCode)(r||i._zoomLevel!==n||e.lastMarker.data.forceIconRedraw)&&(t.PrepareLeafletMarker(i,e.lastMarker.data,e.lastMarker.category),e.lastMarker.data.forceIconRedraw&&(e.lastMarker.data.forceIconRedraw=!1)),i.setLatLng(o),a=i;else if(e.population>1&&s._leafletOldPopulation>1&&(i._zoomLevel===n||s._leafletPosition.equals(o))){if(i.setLatLng(o),r||e.population!=s._leafletOldPopulation||e.hashCode!==s._leafletOldHashCode){var u={};L.Util.extend(u,e.bounds),i._leafletClusterBounds=u,i.setIcon(t.BuildLeafletClusterIcon(e))}s._leafletOldPopulation=e.population,s._leafletOldHashCode=e.hashCode,a=i}a?(a._removeFromMap=!1,c.push(e),a._zoomLevel=n,a._hashCode=e.hashCode,a._population=e.population,s._leafletMarker=a,s._leafletPosition=o):(1===e.population?m.push(e):p.push(e),s._leafletPosition=o,s._leafletOldPopulation=e.population,s._leafletOldHashCode=e.hashCode)}),p=m.concat(p),f=0,_=l.length;f<_;++f){var I=(g=l[f]).data;if(h=I._leafletMarker,I._leafletMarker._removeFromMap){var x=!0;if(h._zoomLevel===n){var P=g.averagePosition;for(T=(g.bounds.maxLat-g.bounds.minLat)*s,y=(g.bounds.maxLng-g.bounds.minLng)*s,C=0,R=p.length;C<R;++C){var F=p[C],q=F.data;if(1===h._population&&1===F.population&&h._hashCode===F.hashCode)(r||F.lastMarker.data.forceIconRedraw)&&(this.PrepareLeafletMarker(h,F.lastMarker.data,F.lastMarker.category),F.lastMarker.data.forceIconRedraw&&(F.lastMarker.data.forceIconRedraw=!1)),h.setLatLng(q._leafletPosition),x=!1;else{var U=F.averagePosition,N=P.lng-y,j=U.lng+y;if(b=P.lng+y,w=P.lat-T,O=P.lat+T,M=U.lng-y,D=U.lat-T,k=U.lat+T,h._population>1&&F.population>1&&b>M&&N<j&&O>D&&w<k){h.setLatLng(q._leafletPosition),h.setIcon(this.BuildLeafletClusterIcon(F));var z={};L.Util.extend(z,F.bounds),h._leafletClusterBounds=z,q._leafletOldPopulation=F.population,q._leafletOldHashCode=F.hashCode,h._population=F.population,x=!1}}if(!x){q._leafletMarker=h,h._removeFromMap=!1,c.push(F),p.splice(C,1),--C,--R;break}}}x&&(h._removeFromMap||console.error("wtf"))}}for(f=0,_=p.length;f<_;++f){var B,G=(I=(g=p[f]).data)._leafletPosition;(B=1===g.population?this.BuildLeafletMarker(g.lastMarker,G):this.BuildLeafletCluster(g,G)).addTo(e),B.setOpacity(0),E.push(B),I._leafletMarker=B,B._zoomLevel=n,B._hashCode=g.hashCode,B._population=g.population,c.push(g)}if(window.setTimeout(function(){for(f=0,_=E.length;f<_;++f){var t=E[f];t._icon&&L.DomUtil.addClass(t._icon,"prunecluster-anim"),t._shadow&&L.DomUtil.addClass(t._shadow,"prunecluster-anim"),t.setOpacity(1)}},1),this._hardMove)for(f=0,_=d.length;f<_;++f)(h=d[f])._removeFromMap&&e.removeLayer(h);else{if(0!==this._removeTimeoutId)for(window.clearTimeout(this._removeTimeoutId),f=0,_=this._markersRemoveListTimeout.length;f<_;++f)e.removeLayer(this._markersRemoveListTimeout[f]);var Y=[];for(f=0,_=d.length;f<_;++f)(h=d[f])._removeFromMap&&(h.setOpacity(0),Y.push(h));Y.length>0&&(this._removeTimeoutId=window.setTimeout(function(){for(f=0,_=Y.length;f<_;++f)e.removeLayer(Y[f]);t._removeTimeoutId=0},300)),this._markersRemoveListTimeout=Y}this._objectsOnMap=c,this._hardMove=!1,this._resetIcons=!1}},FitBounds:function(t){void 0===t&&(t=!0);var e=this.Cluster.ComputeGlobalBounds(t);e&&this._map.fitBounds(new L.LatLngBounds(new L.LatLng(e.minLat,e.maxLng),new L.LatLng(e.maxLat,e.minLng)))},GetMarkers:function(){return this.Cluster.GetMarkers()},RedrawIcons:function(t){void 0===t&&(t=!0),this._resetIcons=!0,t&&this.ProcessView()}}),l=(L.Layer?L.Layer:L.Class).extend({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_spiralCountTrigger:8,spiderfyDistanceMultiplier:1,initialize:function(t){this._cluster=t,this._currentMarkers=[],this._multiLines=!!L.multiPolyline,this._lines=this._multiLines?L.multiPolyline([],{weight:1.5,color:"#222"}):L.polyline([],{weight:1.5,color:"#222"})},onAdd:function(t){this._map=t,this._map.on("overlappingmarkers",this.Spiderfy,this),this._map.on("click",this.Unspiderfy,this),this._map.on("zoomend",this.Unspiderfy,this)},Spiderfy:function(t){var e=this;if(t.cluster===this._cluster){this.Unspiderfy();var a=t.markers.filter(function(t){return!t.filtered});this._currentCenter=t.center;var n,s=this._map.latLngToLayerPoint(t.center);a.length>=this._spiralCountTrigger?n=this._generatePointsSpiral(a.length,s):(this._multiLines&&(s.y+=10),n=this._generatePointsCircle(a.length,s));for(var r=[],o=[],i=[],u=0,l=n.length;u<l;++u){var c=this._map.layerPointToLatLng(n[u]),d=this._cluster.BuildLeafletMarker(a[u],t.center);d.setZIndexOffset(5e3),d.setOpacity(0),this._currentMarkers.push(d),this._map.addLayer(d),o.push(d),i.push(c)}window.setTimeout(function(){for(u=0,l=n.length;u<l;++u)o[u].setLatLng(i[u]).setOpacity(1);var a=+new Date,s=window.setInterval(function(){r=[];var o=+new Date-a;if(o>=290)window.clearInterval(s),c=1;else var c=o/290;var d=t.center;for(u=0,l=n.length;u<l;++u){var f=i[u],_=f.lat-d.lat,h=f.lng-d.lng;r.push([d,new L.LatLng(d.lat+_*c,d.lng+h*c)])}e._lines.setLatLngs(r)},42)},1),this._lines.setLatLngs(r),this._map.addLayer(this._lines),t.marker&&(this._clusterMarker=t.marker.setOpacity(.3))}},_generatePointsCircle:function(t,e){var a,n,s=this.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t)/this._2PI,r=this._2PI/t,o=[];for(o.length=t,a=t-1;a>=0;a--)n=this._circleStartAngle+a*r,o[a]=new L.Point(Math.round(e.x+s*Math.cos(n)),Math.round(e.y+s*Math.sin(n)));return o},_generatePointsSpiral:function(t,e){var a,n=this.spiderfyDistanceMultiplier*this._spiralLengthStart,s=this.spiderfyDistanceMultiplier*this._spiralFootSeparation,r=this.spiderfyDistanceMultiplier*this._spiralLengthFactor,o=0,i=[];for(i.length=t,a=t-1;a>=0;a--)o+=s/n+5e-4*a,i[a]=new L.Point(Math.round(e.x+n*Math.cos(o)),Math.round(e.y+n*Math.sin(o))),n+=this._2PI*r/o;return i},Unspiderfy:function(){for(var t=this,e=0,a=this._currentMarkers.length;e<a;++e)this._currentMarkers[e].setLatLng(this._currentCenter).setOpacity(0);var n=this._currentMarkers;window.setTimeout(function(){for(e=0,a=n.length;e<a;++e)t._map.removeLayer(n[e])},300),this._currentMarkers=[],this._map.removeLayer(this._lines),this._clusterMarker&&this._clusterMarker.setOpacity(1)},onRemove:function(t){this.Unspiderfy(),t.off("overlappingmarkers",this.Spiderfy,this),t.off("click",this.Unspiderfy,this),t.off("zoomend",this.Unspiderfy,this)}});t.exports={PruneCluster:o,PruneClusterForLeaflet:u}},153:function(module,exports){"use strict";!function(window,undefined){L.Util.ajax=function(url,success,error){window.XMLHttpRequest===undefined&&(window.XMLHttpRequest=function(){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){throw Error("XMLHttpRequest is not supported")}});var response,request=new XMLHttpRequest;return request.open("GET",url),request.onreadystatechange=function(){4===request.readyState&&(200===request.status?(response=window.JSON?JSON.parse(request.responseText):eval("("+request.responseText+")"),success(response)):0!==request.status&&error!==undefined&&error(request.status))},request.ontimeout=function(){error("timeout")},request.send(),request},L.UtfGrid=(L.Layer||L.Class).extend({includes:L.Mixin.Events,options:{subdomains:"abc",minZoom:0,maxZoom:18,tileSize:256,resolution:4,useJsonP:!0,pointerCursor:!0,maxRequests:4,requestTimeout:6e4},_mouseOn:null,initialize:function(t,e){L.Util.setOptions(this,e),this._requests={},this._request_queue=[],this._requests_in_process=[],this._url=t,this._cache={};for(var a=0;window["lu"+a];)a++;this._windowKey="lu"+a,window[this._windowKey]={};var n=this.options.subdomains;"string"==typeof this.options.subdomains&&(this.options.subdomains=n.split(""))},onAdd:function(t){this._map=t,this._container=this._map._container,this._update();var e=this._map.getZoom();e>this.options.maxZoom||e<this.options.minZoom||(t.on("click",this._click,this),t.on("mousemove",this._move,this),t.on("moveend",this._update,this))},onRemove:function(){var t=this._map;t.off("click",this._click,this),t.off("mousemove",this._move,this),t.off("moveend",this._update,this),this.options.pointerCursor&&(this._container.style.cursor="")},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){for(var t in this._request_queue=[],this._requests)this._requests.hasOwnProperty(t)&&this._abort_request(t);this._cache={},this._update()},_click:function(t){this.fire("click",this._objectForEvent(t))},_move:function(t){var e=this._objectForEvent(t);e.data!==this._mouseOn?(this._mouseOn&&(this.fire("mouseout",{latlng:t.latlng,data:this._mouseOn}),this.options.pointerCursor&&(this._container.style.cursor="")),e.data&&(this.fire("mouseover",e),this.options.pointerCursor&&(this._container.style.cursor="pointer")),this._mouseOn=e.data):e.data&&this.fire("mousemove",e)},_objectForEvent:function(t){var e=this._map,a=e.project(t.latlng),n=this.options.tileSize,s=this.options.resolution,r=Math.floor(a.x/n),o=Math.floor(a.y/n),i=Math.floor((a.x-r*n)/s),u=Math.floor((a.y-o*n)/s),l=e.options.crs.scale(e.getZoom())/n;r=(r+l)%l,o=(o+l)%l;var c=this._cache[e.getZoom()+"_"+r+"_"+o],d=null;if(c&&c.grid){var f=this._utfDecode(c.grid[u].charCodeAt(i)),_=c.keys[f];c.data.hasOwnProperty(_)&&(d=c.data[_])}return L.extend({latlng:t.latlng,data:d},t)},_update:function(){var t=this._map.getPixelBounds(),e=this._map.getZoom(),a=this.options.tileSize;if(!(e>this.options.maxZoom||e<this.options.minZoom)){for(var n=new L.Point(Math.floor(t.min.x/a),Math.floor(t.min.y/a)),s=new L.Point(Math.floor(t.max.x/a),Math.floor(t.max.y/a)),r=this._map.options.crs.scale(e)/a,o=[],i=n.x;i<=s.x;i++)for(var u=n.y;u<=s.y;u++){var l=(i+r)%r,c=(u+r)%r,d=e+"_"+l+"_"+c;o.push(d),this._cache.hasOwnProperty(d)||(this._cache[d]=null,this.options.useJsonP?this._loadTileP(e,l,c):this._loadTile(e,l,c))}for(var f in this._requests)o.indexOf(f)<0&&this._abort_request(f)}},_loadTileP:function(t,e,a){var n=document.getElementsByTagName("head")[0],s=t+"_"+e+"_"+a,r="lu_"+s,o=this._windowKey,i=this,u=L.Util.template(this._url,L.Util.extend({s:L.TileLayer.prototype._getSubdomain.call(this,{x:e,y:a}),z:t,x:e,y:a,cb:o+"."+r},this.options)),l=document.createElement("script");l.setAttribute("type","text/javascript"),l.setAttribute("src",u),window[o][r]=function(t){i._cache[s]=t,delete window[o][r],n.removeChild(l),i._finish_request(s)},this._queue_request(s,u,function(){return n.appendChild(l),{abort:function(){n.removeChild(l)}}})},_loadTile:function(t,e,a){var n=L.Util.template(this._url,L.Util.extend({s:L.TileLayer.prototype._getSubdomain.call(this,{x:e,y:a}),z:t,x:e,y:a},this.options)),s=t+"_"+e+"_"+a;this._queue_request(s,n,this._ajaxRequestFactory(s,n))},_ajaxRequestFactory:function(t,e){var a=this._successCallbackFactory(t),n=this._errorCallbackFactory(e);return function(){var t=L.Util.ajax(e,a,n);return t.timeout=this.options.requestTimeout,t}.bind(this)},_successCallbackFactory:function(t){return function(e){this._cache[t]=e,this._finish_request(t)}.bind(this)},_errorCallbackFactory:function(t){return function(e){this.fire("tileerror",{url:t,code:e})}.bind(this)},_queue_request:function(t,e,a){this._requests[t]={callback:a,timeout:null,handler:null,url:e},this._request_queue.push(t),this._process_queued_requests()},_finish_request:function(t){var e=this._requests_in_process.indexOf(t);e>=0&&this._requests_in_process.splice(e,1),(e=this._request_queue.indexOf(t))>=0&&this._request_queue.splice(e,1),this._requests[t]&&(this._requests[t].timeout&&window.clearTimeout(this._requests[t].timeout),delete this._requests[t]),this._process_queued_requests(),0===this._requests_in_process.length&&this.fire("load")},_abort_request:function(t){this._requests[t]&&this._requests[t].handler&&"function"==typeof this._requests[t].handler.abort&&this._requests[t].handler.abort(),null===this._cache[t]&&delete this._cache[t],this._finish_request(t)},_process_queued_requests:function(){for(;this._request_queue.length>0&&(0===this.options.maxRequests||this._requests_in_process.length<this.options.maxRequests);)this._process_request(this._request_queue.pop())},_process_request:function(t){this._requests_in_process.push(t);var e=this._requests[t].callback();if(this._requests[t]&&(this._requests[t].handler=e,e.timeout===undefined)){var a=this._timeoutCallbackFactory(t);this._requests[t].timeout=window.setTimeout(a,this.options.requestTimeout)}},_timeoutCallbackFactory:function(t){var e=this._requests[t].url;return function(){this.fire("tileerror",{url:e,code:"timeout"}),this._abort_request(t)}.bind(this)},_utfDecode:function(t){return t>=93&&t--,t>=35&&t--,t-32}}),L.utfGrid=function(t,e){return new L.UtfGrid(t,e)}}(window)},154:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(a(88)),s=i(a(422)),r=i(a(398)),o=i(a(402));function i(t){return t&&t.__esModule?t:{default:t}}n.default.use(s.default);var u=[{path:"/conflicts-related-to-protected-areas",components:{default:r.default}},{path:"/regions-with-greatest-water-risks",components:{default:o.default}},{path:"*",redirect:"conflicts-related-to-protected-areas"}];e.default=new s.default({mode:"hash",routes:u})},155:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(a(184)),s=u(a(93)),r=u(a(94)),o=u(a(41)),i=a(152);function u(t){return t&&t.__esModule?t:{default:t}}var l={unit:5,small:26,medium:36,big:44,huge:52},c=function(){function t(e){(0,s.default)(this,t);var a=new i.PruneClusterForLeaflet;return a.BuildLeafletIcon=function(t){var e=t.geometry.coordinates,a=new i.PruneCluster.Marker(e[1],e[0]);return a.data.feature=t,a},a.PrepareLeafletMarker=function(e,a){a.feature.geometry.coordinates;var n="c-marker-bubble";t.getSize(1);e.setIcon(o.default.divIcon({iconSize:[8,8],className:n}))},a.originalIcon=a.BuildLeafletClusterIcon,a.BuildLeafletCluster=function(t,e){return new o.default.Marker(e,{icon:a.BuildLeafletClusterIcon(t)})},a.BuildLeafletClusterIcon=function(t){var e=t.population,n=a.originalIcon(t),s=l.medium;return e<=100?s=l.small:e>200&&e<=300?s=l.big:e>300&&(s=l.huge),n.options.iconSize=new o.default.Point(s,s,null),n.options.className="c-marker-cluster-bubble",n.text=e,n},e.forEach(function(t){a.RegisterMarker(a.BuildLeafletIcon(t))}),a}return(0,r.default)(t,null,[{key:"setMarkerHtml",value:function(){return'<div class="marker-bubble-inner"></div>'}},{key:"setInfowindowHtml",value:function(t){return'\n      <div class="c-infowindow -no-iteraction">\n      <h3>'+t+"</h3>\n      </div>"}},{key:"setInfowindowClusterHtml",value:function(t){return'\n      <div class="c-infowindow -no-iteraction">\n      <h3>'+t.population+" alerts</h3>\n      </div>"}},{key:"getSize",value:function(t){var e=t<1?1:t;return 60+2.5*(0,n.default)(e)}}]),t}();e.default=c},156:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=_(a(88)),s=_(a(20)),r=_(a(160)),o=_(a(158)),i=_(a(161)),u=_(a(157)),l=_(a(159)),c=_(a(162)),d=_(a(164)),f=_(a(163));function _(t){return t&&t.__esModule?t:{default:t}}n.default.use(s.default);e.default=new s.default.Store({modules:{searchDatasets:r.default,featuredDatasets:o.default,selectedDataset:i.default,cartoLayer:u.default,modal:l.default,token:c.default,waterRiskLayers:d.default,twitterSlides:f.default},strict:!1})},157:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=u(a(21)),r=u(a(56)),o=u(a(11)),i=a(10);function u(t){return t&&t.__esModule?t:{default:t}}var l={protected_areas:{cartocss:"#wdpa_protected_areas {\n      line-width: 0.1;\n      line-opacity: 1;\n      polygon-fill: #334285;\n      polygon-opacity: 0.1;\n      line-color: #334285;\n    }\n    ",sql:"SELECT the_geom, the_geom_webmercator, iucn_cat, iso3 FROM wdpa_protected_areas",interactivity:["iucn_cat"]}},c={state:{layer:{specs:{slug:null,addLayer:!1},cartoLayerId:null,loading:!1,error:!1},markerLayer:{layer:null,loading:!1,error:!1},clusterLayer:{geojson:{},loading:!1,error:!1}},mutations:(n={},(0,o.default)(n,i.SET_CARTO_LAYER_SLUG_SUCCESS,function(t,e){t.layer.specs={slug:e.slug,addLayer:e.addLayer}}),(0,o.default)(n,i.SET_CARTO_LAYER_LOADING,function(t,e){t.layer.loading=e}),(0,o.default)(n,i.SET_CARTO_LAYER_SUCCESS,function(t,e){t.layer.cartoLayerId=e}),(0,o.default)(n,i.SET_CARTO_LAYER_ERROR,function(t,e){t.layer.error=e}),(0,o.default)(n,i.RESET_CARTO_LAYER_OPTIONS,function(t){t.layer={specs:{slug:null,addLayer:null},cartoLayerId:null}}),(0,o.default)(n,i.SET_CARTO_MARKERS_LAYER_SUCCESS,function(t,e){t.markerLayer.layer=e}),(0,o.default)(n,i.SET_CARTO_MARKERS_LAYER_ERROR,function(t,e){t.markerLayer.error=e}),(0,o.default)(n,i.SET_CARTO_MARKERS_LAYER_LOADING,function(t,e){t.markerLayer.loading=e}),(0,o.default)(n,i.SET_CARTO_CLUSTER_LAYER_SUCCESS,function(t,e){t.clusterLayer.geojson=e}),(0,o.default)(n,i.SET_CARTO_CLUSTER_LAYER_ERROR,function(t,e){t.clusterLayer.error=e}),(0,o.default)(n,i.SET_CARTO_CLUSTER_LAYER_LOADING,function(t,e){t.clusterLayer.loading=e}),n),actions:{setMarkerLayer:function(t){(0,t.commit)(i.SET_CARTO_MARKERS_LAYER_SUCCESS,{url:"https://simbiotica.carto.com/api/v2/sql?q=SELECT count, cast(st_asgeojson(st_centroid(the_geom)) as json) as geometry FROM gdelt_project_data_filtered"})},setCartoLayerSlug:function(t,e){(0,t.commit)(i.SET_CARTO_LAYER_SLUG_SUCCESS,e)},resetCartoLayerId:function(t){(0,t.commit)(i.SET_CARTO_LAYER_SUCCESS,null)},setCartoLayer:function(t){var e=t.commit,a=t.state.layer.specs.slug,n=l[a],o={version:"1.0.1",layers:[{user_name:"wri-01",type:"cartodb",options:{sql:n.sql,cartocss:n.cartocss,cartocss_version:"2.3.0",interactivity:n.interactivity}}]},u={method:"POST",headers:{"Content-Type":"application/json"},body:(0,r.default)(o)};return new s.default(function(t,a){e(i.SET_CARTO_LAYER_LOADING,!0),fetch("https://wri-01.cartodb.com/api/v1/map",u).then(function(t){return t.json()}).then(function(a){e(i.SET_CARTO_LAYER_LOADING,!1),e(i.SET_CARTO_LAYER_SUCCESS,a.layergroupid),t()}).catch(function(t){e(i.SET_CARTO_LAYER_LOADING,!1),e(i.SET_CARTO_LAYER_ERROR,t),a(t)})})},resetCartoLayerOptions:function(t){(0,t.commit)(i.RESET_CARTO_LAYER_OPTIONS)},setClusterLayer:function(t){var e=t.commit,a=t.state;return new s.default(function(t,n){e(i.SET_CARTO_CLUSTER_LAYER_LOADING,!0),fetch(a.markerLayer.layer.url).then(function(t){return t.json()}).then(function(a){e(i.SET_CARTO_CLUSTER_LAYER_LOADING,!1),e(i.SET_CARTO_CLUSTER_LAYER_SUCCESS,{features:a.rows,type:"FeatureCollection"}),t()}).catch(function(t){e(i.SET_CARTO_CLUSTER_LAYER_LOADING,!1),e(i.SET_CARTO_CLUSTER_LAYER_ERROR,t),n(t)})})}},getters:{getCartoLayerSpecs:function(t){return t.layer.specs},getCartoLayerIdData:function(t){return t.layer.cartoLayerId},getLayerLoading:function(t){return t.layer.loading},getLayerError:function(t){return t.layer.error},getClusterLayer:function(t){return t.clusterLayer.geojson.features}}};e.default=c},158:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=u(a(21)),r=u(a(11)),o=a(74),i=a(10);function u(t){return t&&t.__esModule?t:{default:t}}var l=new o.Deserializer({keyForAttribute:"camelCase"}),c="https://api.apihighways.org",d={state:{featured:{list:[],loading:!1,error:!1}},mutations:(n={},(0,r.default)(n,i.SET_FEATURED_DATASETS_SUCCESS,function(t,e){t.featured.list=e}),(0,r.default)(n,i.SET_FEATURED_DATASETS_LOADING,function(t,e){t.featured.loading=e}),(0,r.default)(n,i.SET_FEATURED_DATASETS_ERROR,function(t,e){t.featured.error=e.message}),(0,r.default)(n,i.SET_DATASETS_SUCCESS,function(t,e){t.featured.list=e}),(0,r.default)(n,i.SET_DATASETS_LOADING,function(t,e){t.featured.loading=e}),(0,r.default)(n,i.SET_DATASETS_ERROR,function(t,e){t.featured.error=e.message}),n),actions:{getDataSets:function(t){var e=t.commit;return new s.default(function(t,a){e(i.SET_DATASETS_LOADING,!0),e(i.SET_DATASETS_ERROR,!1),fetch(c+"/v1/dataset?app=data4sdgs&page[size]=12&published=true&includes=vocabulary,metadata&cache=expire").then(function(t){if(t.status>=400)throw new Error(t.status);return t.json()}).then(function(a){l.deserialize(a,function(a,n){if(a)throw new Error("Error deserializing json api");e(i.SET_DATASETS_LOADING,!1),e(i.SET_DATASETS_SUCCESS,n),t(n)})}).catch(function(t){e(i.SET_DATASETS_LOADING,!1),e(i.SET_DATASETS_ERROR,t),a(t)})})},getFeaturedDatasets:function(t){var e=t.commit;return new s.default(function(t,a){e(i.SET_FEATURED_DATASETS_LOADING,!0),e(i.SET_FEATURED_DATASETS_ERROR,!1),fetch(c+"/v1/dataset?app=data4sdgs&tags=data4sdgs-featured&published=true&page[size]=12&includes=vocabulary,metadata&cache=expire").then(function(t){if(t.status>=400)throw new Error(t.status);return t.json()}).then(function(a){l.deserialize(a,function(a,n){if(a)throw new Error("Error deserializing json api");e(i.SET_FEATURED_DATASETS_LOADING,!1),e(i.SET_FEATURED_DATASETS_SUCCESS,n),t(n)})}).catch(function(t){e(i.SET_FEATURED_DATASETS_LOADING,!1),e(i.SET_FEATURED_DATASETS_ERROR,t),a(t)})})}},getters:{getFeaturedListData:function(t){return t.featured.list},getFeaturedLoading:function(t){return t.featured.loading},getFeaturedError:function(t){return t.featured.error}}};e.default=d},159:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=a(11),r=(n=s)&&n.__esModule?n:{default:n},o=a(10);var i={state:{open:!1,onClose:null,type:null},mutations:(0,r.default)({},o.SET_MODAL,function(t,e){var a=e.isOpen,n=e.onClose,s=e.type;t.open=a,t.onClose=n,t.type=s}),actions:{setModal:function(t,e){(0,t.commit)(o.SET_MODAL,e)}}};e.default=i},160:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=u(a(21)),r=u(a(11)),o=a(74),i=a(10);function u(t){return t&&t.__esModule?t:{default:t}}var l=new o.Deserializer({keyForAttribute:"camelCase"}),c={state:{search:{list:[],filters:null,query:null,loading:!1,error:!1,page:1}},mutations:(n={},(0,r.default)(n,i.SET_SEARCH_DATASETS_FILTERS,function(t,e){t.search.filters=e}),(0,r.default)(n,i.SET_SEARCH_DATASETS_SUCCESS,function(t,e){t.search.list=e}),(0,r.default)(n,i.SET_SEARCH_DATASETS_LOADING,function(t,e){t.search.loading=e}),(0,r.default)(n,i.SET_SEARCH_DATASETS_ERROR,function(t,e){t.search.error=e.message}),(0,r.default)(n,i.SET_SEARCH_DATASETS_QUERY,function(t,e){t.search.query=e}),n),actions:{setSearchDatasetsFilters:function(t,e){var a=t.commit,n=t.dispatch,r=t.state;return new s.default(function(){a(i.SET_SEARCH_DATASETS_FILTERS,e),n("searchDatasets",r.search.query)})},searchDatasets:function(t,e){var a=t.commit,n=t.state;return new s.default(function(){a(i.SET_SEARCH_DATASETS_QUERY,e),a(i.SET_SEARCH_DATASETS_LOADING,!0),a(i.SET_SEARCH_DATASETS_ERROR,!1);var t=n.search.filters?"&vocabulary[legacy]="+n.search.filters:"",s=encodeURI(n.search.query);fetch("https://api.apihighways.org/v1/dataset?application=data4sdgs&published=true&includes=vocabulary,metadata&page[size]=10000"+(n.search.query&&""!==n.search.query?"&name="+s:"")+t).then(function(t){if(t.status>=400)throw new Error(t.status);return t.json()}).then(function(t){l.deserialize(t,function(t,e){if(t)throw new Error("Error deserializing json api");a(i.SET_SEARCH_DATASETS_LOADING,!1),a(i.SET_SEARCH_DATASETS_SUCCESS,e)})}).catch(function(t){a(i.SET_SEARCH_DATASETS_LOADING,!1),a(i.SET_SEARCH_DATASETS_ERROR,t)})})}},getters:{getSearchNotFound:function(t){return t.search.query&&!t.search.error&&!t.search.list.length&&!t.search.loading},getSearchListData:function(t){return t.search.list},getSearchQuery:function(t){return t.search.query},getSearchFilters:function(t){return t.search.filters},getSearchLoading:function(t){return t.search.loading},getSearchError:function(t){return t.search.error&&t.search.query}}};e.default=c},161:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=d(a(21)),r=d(a(11)),o=d(a(56)),i=d(a(95)),u=a(74),l=d(a(391)),c=a(10);function d(t){return t&&t.__esModule?t:{default:t}}var f=new u.Deserializer({keyForAttribute:"camelCase"}),_="https://api.apihighways.org",h={state:{selected:{dataset:null,loading:!1,error:!1},recentDatasets:JSON.parse(localStorage.getItem("recentDatasets"))||[]},mutations:(n={},(0,r.default)(n,c.SET_SELECTED_DATASET_SUCCESS,function(t,e){t.selected.dataset=e}),(0,r.default)(n,c.SET_SELECTED_DATASET_LOADING,function(t,e){t.selected.loading=e}),(0,r.default)(n,c.SET_SELECTED_DATASET_ERROR,function(t,e){t.selected.error=e.message}),(0,r.default)(n,c.ADD_RECENT_DATASETS,function(t,e){var a=(0,l.default)([e].concat((0,i.default)(t.recentDatasets)),"name");a.length>6&&a.pop(),t.recentDatasets=a,localStorage.setItem("recentDatasets",(0,o.default)(a))}),n),actions:{setSelectedDataset:function(t,e){var a=t.commit;return new s.default(function(t,n){a(c.SET_SELECTED_DATASET_LOADING,!0),a(c.SET_SELECTED_DATASET_ERROR,!1),fetch(_+"/dataset/"+e+"?includes=metadata").then(function(t){if(t.status>=400)throw new Error(t.status);return t.json()}).then(function(e){f.deserialize(e,function(e,n){if(e)throw new Error("Error deserializing json api");a(c.SET_SELECTED_DATASET_LOADING,!1),a(c.SET_SELECTED_DATASET_SUCCESS,n),a(c.ADD_RECENT_DATASETS,n),t()})}).catch(function(t){a(c.SET_SELECTED_DATASET_LOADING,!1),a(c.SET_SELECTED_DATASET_ERROR,t),n(t)})})}},getters:{getSelectedDataset:function(t){return t.selected.dataset},getRecentDatasets:function(t){return t.recentDatasets},getSelectedDatasetURI:function(t){return t.selected.dataset?_+"/query?sql=SELECT * FROM "+t.selected.dataset.id:null}}};e.default=h},162:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(a(21)),s=i(a(11)),r=i(a(392)),o=a(10);function i(t){return t&&t.__esModule?t:{default:t}}var u={state:{token:""},mutations:(0,s.default)({},o.SET_TOKEN,function(t,e){t.token=e.token}),actions:{setToken:function(t){var e=t.commit;return new n.default(function(){fetch("https://api.apihighways.org/auth/generate-token",{headers:{Authorization:"Bearer "+r.default.parse(window.location.search).token}}).then(function(t){if(t.status>=400)throw new Error(t.status);return t.json()}).then(function(t){e(o.SET_TOKEN,t)}).catch(function(t){console.error(t)})})}}};e.default=u},163:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=i(a(21)),r=i(a(11)),o=a(10);function i(t){return t&&t.__esModule?t:{default:t}}var u={state:{timeline:[],loading:!1,error:!1},mutations:(n={},(0,r.default)(n,o.SET_TWITTER_SLIDES_SUCCESS,function(t,e){t.timeline=e}),(0,r.default)(n,o.SET_TWITTER_SLIDES_ERROR,function(t,e){t.error=e}),(0,r.default)(n,o.SET_TWITTER_SLIDES_LOADING,function(t,e){t.loading=e}),n),actions:{setTimeline:function(t){var e=t.commit;return new s.default(function(t,a){e(o.SET_TWITTER_SLIDES_LOADING,!0),e(o.SET_TWITTER_SLIDES_ERROR,!1),fetch("/api/twitter").then(function(t){if(t.status>=400)throw new Error(t.status);return t.json()}).then(function(a){e(o.SET_TWITTER_SLIDES_LOADING,!1),e(o.SET_TWITTER_SLIDES_SUCCESS,a.statuses),t()}).catch(function(t){e(o.SET_TWITTER_SLIDES_LOADING,!1),e(o.SET_TWITTER_SLIDES_ERROR,t),a()})})}},getters:{getFormatedTweets:function(t){return t.timeline.map(function(t){return{url:t.entities.urls[0]?t.entities.urls[0].expanded_url:null,text:t.text,user:t.user.screen_name}})},getTweetsAvailability:function(t){return!t.loading&&!t.error&&t.timeline.length}}};e.default=u},164:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s,r=a(11),o=(n=r)&&n.__esModule?n:{default:n},i=a(10);var u=[{id:"1c56e5c4-f617-4570-90dd-20724ea674b1",name:"Water transitions",slug:"water-transitions",dataset:"1c56e5c4-f617-4570-90dd-20724ea674b1",description:"Water transitions",application:["data4sdgs"],iso:[],provider:"cartodb",userId:"57a0aa1071e394dd32ffe137",default:!0,protected:!1,env:"production",layerConfig:{account:"simbiotica",params_config:[],sql_config:[],body:{maxzoom:18,minzoom:3,layers:[{type:"cartodb",options:{sql:"Select * from water_final",cartocss:"#year1 {raster-opacity:1; raster-scaling:near; raster-colorizer-default-mode:exact; raster-colorizer-default-color:  transparent; raster-colorizer-epsilon:0.11; raster-colorizer-stops: stop(1, #334285) stop(2, #22b14c) stop(3, #d12d3e) stop(4, #99d9ea) stop(5, #b5e61d) stop(6, #e6a1aa) stop(7, #ff7f27) stop(8, #ffc90e) stop(9, #7f7f7f) stop(10, #c3c3c3)}",cartocss_version:"2.3.0",geom_column:"the_raster_webmercator",geom_type:"raster",raster_band:1}}]}},legendConfig:{type:"basic",items:[{name:"Permanent water body",color:"#0000dd"},{name:"New permanent",color:"#22b14c"},{name:"Lost permanent",color:"#d12d3e"},{name:"Seasonal",color:"#99d9ea"},{name:"New seasonal",color:"#b5e61d"},{name:"Lost seasonal",color:"#e6a1aa"},{name:"Seasonal to permanent",color:"#ff7f27"},{name:"Permanent to seasonal",color:"#ffc90e"},{name:"Ephemeral permanent",color:"#7f7f7f"},{name:"Ephemeral seasonal",color:"#c3c3c3"}]},interactionConfig:{},applicationConfig:{},staticImageConfig:{},updatedAt:"2017-01-12T15:40:02.963Z"},{id:"bd47397c-b714-4ced-9fe9-d20b0b353e3f",name:"Population in South Africa",slug:"population-in-south-africa",dataset:"bd47397c-b714-4ced-9fe9-d20b0b353e3f",description:"Population in South Africa",application:["data4sdgs"],iso:[],provider:"cartodb",userId:"57a0aa1071e394dd32ffe137",default:!0,protected:!1,env:"production",layerConfig:{account:"simbiotica",params_config:[],sql_config:[],body:{maxzoom:18,minzoom:3,layers:[{type:"cartodb",options:{sql:"Select * from pop_well",cartocss:"#pop_well {raster-opacity:1; raster-scaling:near; raster-colorizer-default-mode: linear; raster-colorizer-default-color:  transparent; raster-colorizer-epsilon:0.11; raster-colorizer-stops: stop(1, #f3b641) stop(20, #FFEE99) stop(70, #E5CC4C) stop(150, #E5C319) stop(300, #B29919) stop(500, #998319) }",cartocss_version:"2.3.0",geom_column:"the_raster_webmercator",geom_type:"raster",raster_band:1}}]}},legendConfig:{type:"basic",items:[]},interactionConfig:{},applicationConfig:{},staticImageConfig:{},updatedAt:"2017-01-12T17:12:12.626Z"},{id:"ee2c5877-f212-4eb4-a63a-a82ba7e4e168",name:"Water basins from South Africa",slug:"water-basins-from-south-africa",dataset:"ee2c5877-f212-4eb4-a63a-a82ba7e4e168",description:"water basins  from south africa",application:["data4sdgs"],iso:[],provider:"cartodb",userId:"57a0aa1071e394dd32ffe137",default:!1,protected:!1,env:"production",layerConfig:{account:"simbiotica",params_config:[],sql_config:[],body:{maxzoom:18,minzoom:3,layers:[{type:"cartodb",options:{sql:"SELECT min(cartodb_id) cartodb_id, st_union(the_geom_webmercator) the_geom_webmercator, basinid, basin_name  FROM water_basin_sa group by basinid, basin_name",cartocss:"#water_basin_sa {    polygon-opacity: 0;    line-color: #007fae;    line-width: 1;    line-opacity: 1; }",cartocss_version:"2.3.0"}}]}},legendConfig:{type:"basic",items:[{name:"Extremely high (>80%)",color:"#D4155B"}]},interactionConfig:{},applicationConfig:{},staticImageConfig:{},updatedAt:"2017-01-12T15:12:11.760Z"}];e.default={state:{layers:{list:[],active:[],loading:!1,error:null},basins:{list:[],loading:!1,error:null}},mutations:(s={},(0,o.default)(s,i.SET_WATER_LAYER_SUCCESS,function(t,e){t.layers.list=e,t.layers.loading=!1,t.layers.error=null}),(0,o.default)(s,i.SET_WATER_LAYER_ERROR,function(t,e){t.layers.error=e}),(0,o.default)(s,i.SET_WATER_LAYER_LOADING,function(t,e){t.layers.loading=e}),(0,o.default)(s,i.SET_WATER_LAYERS_ACTIVE,function(t,e){t.layers.active=e.slice(0)}),(0,o.default)(s,i.SET_BASINS_SUCCESS,function(t,e){t.basins.list=e,t.basins.loading=!1,t.basins.error=null}),(0,o.default)(s,i.SET_BASINS_ERROR,function(t,e){t.basins.error=e}),(0,o.default)(s,i.SET_BASINS_LOADING,function(t,e){t.basins.loading=e}),s),actions:{getWaterRiskLayers:function(t){var e=t.commit;e(i.SET_WATER_LAYER_LOADING,!0),fetch(new Request("https://api.apihighways.org/v1/dataset?application=data4sdgs&published=true&includes=vocabulary&vocabulary[legacy]=data4sdgs-vizz2&cache=expire")).then(function(t){if(t.ok)return t.json();throw new Error(t.statusText)}).then(function(t){var a=[],n=[];u.forEach(function(t){a.push(t),n.push(t.id)}),e(i.SET_WATER_LAYER_SUCCESS,a),e(i.SET_WATER_LAYERS_ACTIVE,n),e(i.SET_WATER_LAYER_LOADING,!1)}).catch(function(t){e(i.SET_WATER_LAYER_ERROR,t),e(i.SET_WATER_LAYER_LOADING,!1)})},setActiveLayers:function(t,e){(0,t.commit)(i.SET_WATER_LAYERS_ACTIVE,e)},getWaterBasins:function(t){var e=t.commit;e(i.SET_BASINS_LOADING,!0),fetch(new Request("https://simbiotica.carto.com/api/v2/sql?q=with r as (SELECT sum(population) pop, basin_name, basinid,\n      sum((transition_types::json->>'3')::numeric*pixel_area/10000) water_area_ha FROM water_basin_sa group by basin_name,\n      basinid  order by 4 desc) select round(sum(pop)) as pop, round(sum(water_area_ha)) water,\n      basin_name from r where water_area_ha is not null and basin_name != '' group by basin_name order by water desc")).then(function(t){if(t.ok)return t.json();throw new Error(t.statusText)}).then(function(t){e(i.SET_BASINS_SUCCESS,t.rows),e(i.SET_BASINS_LOADING,!1)}).catch(function(t){e(i.SET_BASINS_ERROR,t),e(i.SET_BASINS_LOADING,!1)})}},getters:{getActiveLayers:function(t){var e=t.layers;return e.list.filter(function(t){return e.active.includes(t.id)})}}}},165:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(a(56)),s=l(a(90)),r=l(a(92)),o=l(a(93)),i=l(a(94)),u=l(a(41));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,t),this.map=e,this.mapLayers={},this.mapRequests={},this.onLayerAddedSuccess=a.onLayerAddedSuccess,this.onLayerAddedError=a.onLayerAddedError}return(0,i.default)(t,[{key:"addLayer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={leaflet:this.addLeafletLayer,arcgis:this.addEsriLayer,cartodb:this.addCartoLayer}[t.provider];return a&&a.call(this,t,e)}},{key:"removeLayer",value:function(t){this.abortRequest(t),this.mapLayers[t]&&(this.map.removeLayer(this.mapLayers[t]),delete this.mapLayers[t])}},{key:"removeLayers",value:function(){var t=this;(0,r.default)(this.mapLayers).forEach(function(e){t.removeLayer(e)})}},{key:"abortRequest",value:function(t){this.mapRequests[t]&&4!==this.mapRequests[t].readyState&&(this.mapRequests[t].abort(),delete this.mapRequests[t])}},{key:"addCartoLayer",value:function(t){var e=this,a=(0,s.default)({},t.layerConfig,{id:t.id});this.abortRequest(a.id);var r=new XMLHttpRequest;r.open("POST","https://"+a.account+".carto.com/api/v1/map"),r.setRequestHeader("Content-Type","application/json"),r.send((0,n.default)(a.body)),this.mapRequests[a.id]=r,r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){var t=JSON.parse(r.responseText),n="https://"+a.account+".carto.com/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";e.mapLayers[a.id]=u.default.tileLayer(n).addTo(e.map).setZIndex(999),e.mapLayers[a.id].on("load",function(){e.onLayerAddedSuccess&&e.onLayerAddedSuccess(a)}),e.mapLayers[a.id].on("tileerror",function(){e.onLayerAddedError&&e.onLayerAddedError(a)})}else e.onLayerAddedError&&e.onLayerAddedError(a)}}}]),t}();e.default=c},166:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=a(396),r=(n=s)&&n.__esModule?n:{default:n};e.default={name:"app",created:function(){},mounted:function(){this.bannerVisibility=!sessionStorage.getItem(this.bannerCookie)},data:function(){return{bannerVisibility:!0,bannerCookie:"data4sdg-beta"}},computed:{location:function(){var t={};return t.home="/"===this.$route.path,t.map="/map"===this.$route.path,t},isExamplePage:function(){return this.$route.path.startsWith("/examples/")},isAboutPage:function(){return this.$route.path.startsWith("/about")},isDataSetsPage:function(){return this.$route.params.dataset}},methods:{hideBanner:function(){sessionStorage.setItem(this.bannerCookie,"true"),this.bannerVisibility=!1}},components:{BannerComponent:r.default}}},167:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=a(148),r=(n=s)&&n.__esModule?n:{default:n};e.default={name:"banner-component",props:{isVisible:{type:Boolean},cookieName:{type:String,required:!0},heading:{type:String},body:{type:String},actionName:{type:String},action:{type:Function,required:!0}},methods:{goToContactForm:function(){window.open("https://docs.google.com/forms/d/e/1FAIpQLSeYC7oc0Fs2pL-QAPHl2Nk_Y-h_ClmvptakzSHL8k5AJakbow/viewform?usp=sf_link","_blank")}},components:{ButtonComponent:r.default}}},168:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"button-component",props:{click:{type:Function,required:!0}},data:function(){return{}}}},169:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"icon-component",props:{name:{type:String,required:!0}},computed:{selector:function(){return"#"+this.name}},data:function(){return{}}}},170:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(a(92)),s=l(a(22));a(112);var r=l(a(41)),o=a(20),i=l(a(155)),u=l(a(153));function l(t){return t&&t.__esModule?t:{default:t}}r.default.Grid=u.default,e.default={name:"map-component",mounted:function(){this.renderMap()},data:function(){return{defaults:{center:[0,0],scrollWheelZoom:!1,basemap:null,attributionControl:!1,zoom:3},basemapUrl:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"}},computed:(0,s.default)({},(0,o.mapGetters)({cartoLayerId:"getCartoLayerIdData",cartoLayerSpecs:"getCartoLayerSpecs",clusterLayer:"getClusterLayer"}),{slug:function(){return this.cartoLayerSpecs.slug}}),methods:{renderMap:function(){this.cartoLayers={},this.createMap(),this.addBasemap(),this.addAllLayers()},createMap:function(){this.map=r.default.map("map",this.defaults)},addBasemap:function(){this.map&&this.map instanceof r.default.Map&&(this.basemap=r.default.tileLayer(this.basemapUrl),this.basemap.addTo(this.map))},addAllLayers:function(){this.addClusterLayer()},addCartoLayer:function(){this.createLayer(this.cartoLayerId),this.addLayer(this.cartoLayers[this.slug].layer),this.setCartoLayerTooltip(this.cartoLayers[this.slug].utfGrid),this.$store.dispatch("resetCartoLayerId")},addLayer:function(t){this.map&&this.map instanceof r.default.Map&&this.map.addLayer(t)},addClusterLayer:function(){var t=this;this.$store.dispatch("setMarkerLayer").then(function(){return t.$store.dispatch("setClusterLayer")}).then(function(){new i.default(t.clusterLayer,{}).addTo(t.map)})},createLayer:function(t){var e="https://wri-01.cartodb.com/api/v1/map/"+t+"/0/{z}/{x}/{y}",a=e+".png",n=e+".grid.json?callback={cb}";this.cartoLayers[this.slug]={layer:new r.default.tileLayer(a),utfGrid:new r.default.UtfGrid(n)}},setCartoLayerTooltip:function(t){var e=this;t.addEventListener("click",function(t){t&&t.data&&r.default.popup().setLatLng(t.latlng||t.latLng).setContent("<div><h3>"+t.data.iucn_cat+"</h3></div>").openOn(e.map)})},removeLayer:function(t){this.map&&this.map instanceof r.default.Map&&this.map.removeLayer(t)},removeCurrentCartoLayer:function(){var t=this;if(this.cartoLayers[this.slug]){this.removeLayer(this.cartoLayers[this.slug].layer);var e={};(0,n.default)(this.cartoLayers).forEach(function(a){a!==t.slug&&(e[a]=t.cartoLayers[a])}),this.cartoLayers=e}}},watch:{cartoLayerId:function(){this.cartoLayerId&&this.addCartoLayer()},cartoLayerSpecs:function(){this.cartoLayerSpecs.addLayer&&!this.cartoLayers[this.slug]?this.$store.dispatch("setCartoLayer"):this.removeCurrentCartoLayer()}}}},171:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(a(22)),s=a(20),r=i(a(399)),o=i(a(404));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:"map-footer-component",data:function(){return{}},computed:(0,n.default)({},(0,s.mapState)({modalContent:function(t){return t.modal.type}})),methods:{toggleModal:function(){this.$store.dispatch("setModal",{isOpen:!0,type:"about"})},goTo:function(t){this.$store.dispatch("setModal",{isOpen:!1}),this.$router.push(t)}},components:{ModalComponent:r.default,ShareComponent:o.default}}},172:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(a(397)),s=u(a(150)),r=u(a(405)),o=u(a(149)),i=u(a(55));function u(t){return t&&t.__esModule?t:{default:t}}e.default={name:"visualization-component",components:{MapComponent:n.default,SidebarComponent:s.default,TimelineComponent:r.default,MapFooterComponent:o.default,IconComponent:i.default}}},173:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(a(22)),s=a(20),r=i(a(55)),o=i(a(148));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:"modal-component",created:function(){window.addEventListener("keyup",this.onKeyup)},beforeDestroy:function(){window.removeEventListener("keyup",this.onKeyup)},computed:(0,n.default)({},(0,s.mapState)({open:function(t){return t.modal.open},onClose:function(t){return t.modal.onClose}})),methods:{close:function(){this.onClose&&this.onClose(),this.$store.dispatch("setModal",{isOpen:!1})},onKeyup:function(t){27===t.keyCode&&this.close()}},components:{IconComponent:r.default,ButtonComponent:o.default}}},174:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"legend-component",data:function(){return{isOpen:!0}},computed:{activeItems:function(){return this.$store.state.waterRiskLayers.layers.active},items:function(){return this.$store.state.waterRiskLayers.layers.list}},methods:{toggle:function(){this.isOpen=!this.isOpen},onCboxChange:function(t,e){var a=t.target.nextElementSibling.innerText,n=this.activeItems.slice(0);t.currentTarget.checked?(ga("send","event","Visualisation","Turn Layer On",a),n.push(e)):(ga("send","event","Visualisation","Turn Layer Off",a),n.splice(this.activeItems.indexOf(e),1)),this.$store.dispatch("setActiveLayers",n)}}}},175:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(a(183)),s=f(a(95)),r=f(a(186)),o=f(a(22));a(112);var i=f(a(41)),u=a(20),l=f(a(165)),c=f(a(400)),d=f(a(269));function f(t){return t&&t.__esModule?t:{default:t}}e.default={name:"other-map",mounted:function(){var t=this;this.renderMap(),this.layerManager=new l.default(this.map),this.activeLayers.forEach(function(e){return t.layerManager.addLayer(e)})},data:function(){return{defaults:{center:[0,0],scrollWheelZoom:!1,basemap:null,attributionControl:!1,zoom:3,minZoom:5},basemapUrl:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"}},methods:{renderMap:function(){this.map=i.default.map("map",this.defaults),this.fitBounds(),i.default.tileLayer(this.basemapUrl).addTo(this.map)},fitBounds:function(){var t=i.default.geoJson(d.default.geometry);this.map.fitBounds(t.getBounds(),{paddingTopLeft:[600,100],paddingBottomRight:[0,0]})}},computed:(0,o.default)({},(0,u.mapGetters)({activeLayers:"getActiveLayers"})),watch:{activeLayers:function(t,e){var a=new r.default(t),o=new r.default(e),i=new r.default([].concat((0,s.default)(t),(0,s.default)(e)));a.size===o.size&&o.clear();var u=!0,l=!1,c=void 0;try{for(var d,f=(0,n.default)(i);!(u=(d=f.next()).done);u=!0){var _=d.value;o.has(_)?a.has(_)||this.layerManager.removeLayer(_.id):this.layerManager.addLayer(_)}}catch(t){l=!0,c=t}finally{try{!u&&f.return&&f.return()}finally{if(l)throw c}}}},components:{LegendComponent:c.default}}},176:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(a(149)),s=i(a(150)),r=i(a(401)),o=i(a(403));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:"other-visualization-page",components:{OtherMap:r.default,MapFooterComponent:n.default,ToggleMenu:o.default,SidebarComponent:s.default}}},177:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(a(22)),s=a(20),r=o(a(151));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"toggle-menu",mounted:function(){this.sortBasins()},data:function(){return{closed:!1,sort:{field:"water",direction:!0},basinsList:[]}},computed:(0,n.default)({},(0,s.mapState)({basins:function(t){return t.waterRiskLayers.basins.list},basinsLoading:function(t){return t.waterRiskLayers.basins.loading}})),methods:{toggle:function(){this.closed=!this.closed},setSortField:function(t){this.sort.direction=t!==this.sort.field||!this.sort.direction,this.sort.field=t},sortBasins:function(){var t=this,e=this.basins.slice(0);e.sort(function(e,a){return t.sort.direction?e[t.sort.field]>a[t.sort.field]?1:-1:e[t.sort.field]>a[t.sort.field]?-1:1}),this.basinsList=e},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}},watch:{basins:function(){this.sortBasins()},"sort.field":function(){this.sortBasins()},"sort.direction":function(){this.sortBasins()}},components:{SpinnerComponent:r.default}}},178:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=a(55),r=(n=s)&&n.__esModule?n:{default:n};var o=encodeURIComponent(window.location.href);e.default={name:"share-component",components:{IconComponent:r.default},data:function(){return{sharedUrl:window.location.href}},computed:{facebookEncodedUrl:function(){return"https://www.facebook.com/sharer/sharer.php?u="+o+"&t=DATA4SDGS Highway Map"},twitterEncodedUrl:function(){return"https://twitter.com/share?url="+o}},methods:{handleCopy:function(){this.$refs.copyInput.select(),document.execCommand("copy")}}}},179:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(a(22)),s=o(a(151)),r=a(20);function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"sidebar-component",mounted:function(){var t=this;this.$store.dispatch("resetCartoLayerOptions"),setTimeout(function(){t.toggleLayer()},0)},data:function(){return{isOpen:!0}},computed:(0,n.default)({},(0,r.mapGetters)({cartoLayerSpecs:"getCartoLayerSpecs",layerLoading:"getLayerLoading"}),{contentOpen:function(){return"sidebar-content"+(this.isOpen?" -active":"")},arrowOpen:function(){return"arrow-down"+(this.isOpen?" -active":"")}}),methods:{toggleLayer:function(t){t?t.target.parentElement.classList.contains("-active")?ga("send","event","Visualisation","Turn Layer Off",t.target.name):ga("send","event","Visualisation","Turn Layer On",t.target.name):t={target:this.$refs.protected_areas};var e=this.cartoLayerSpecs.slug,a=this.cartoLayerSpecs.addLayer,n=!e||t.target.name!==e||t.target.name===e&&!a;t.target.parentElement.classList.toggle("-active"),this.$store.dispatch("setCartoLayerSlug",{slug:t.target.name,addLayer:n})},showLayerLegend:function(t){var e=t.target===this.$refs.protectedAreas?t.target:t.target.parentElement;e.classList.toggle("-active"),e.parentElement.classList.toggle("-active")},openSidebar:function(){this.isOpen=!this.isOpen}},components:{SpinnerComponent:s.default}}},180:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=a(55),r=(n=s)&&n.__esModule?n:{default:n};e.default={name:"spinner-component",props:{loading:{type:Boolean,default:!1},overlay:{type:Boolean,default:!1}},components:{IconComponent:r.default}}},181:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"timeline-component",data:function(){return{}},computed:{}}},241:function(t,e){},242:function(t,e){},243:function(t,e){},244:function(t,e){},245:function(t,e){},246:function(t,e){},247:function(t,e){},248:function(t,e){},249:function(t,e){},250:function(t,e){},251:function(t,e){},252:function(t,e){},253:function(t,e){},254:function(t,e){},255:function(t,e){},256:function(t,e){},257:function(t,e){},258:function(t,e){},269:function(t,e){t.exports={type:"Feature",id:"ZAF",properties:{name:"South Africa"},geometry:{type:"Polygon",coordinates:[[[31.521001,-29.257387],[31.325561,-29.401978],[30.901763,-29.909957],[30.622813,-30.423776],[30.055716,-31.140269],[28.925553,-32.172041],[28.219756,-32.771953],[27.464608,-33.226964],[26.419452,-33.61495],[25.909664,-33.66704],[25.780628,-33.944646],[25.172862,-33.796851],[24.677853,-33.987176],[23.594043,-33.794474],[22.988189,-33.916431],[22.574157,-33.864083],[21.542799,-34.258839],[20.689053,-34.417175],[20.071261,-34.795137],[19.616405,-34.819166],[19.193278,-34.462599],[18.855315,-34.444306],[18.424643,-33.997873],[18.377411,-34.136521],[18.244499,-33.867752],[18.25008,-33.281431],[17.92519,-32.611291],[18.24791,-32.429131],[18.221762,-31.661633],[17.566918,-30.725721],[17.064416,-29.878641],[17.062918,-29.875954],[16.344977,-28.576705],[16.824017,-28.082162],[17.218929,-28.355943],[17.387497,-28.783514],[17.836152,-28.856378],[18.464899,-29.045462],[19.002127,-28.972443],[19.894734,-28.461105],[19.895768,-24.76779],[20.165726,-24.917962],[20.758609,-25.868136],[20.66647,-26.477453],[20.889609,-26.828543],[21.605896,-26.726534],[22.105969,-26.280256],[22.579532,-25.979448],[22.824271,-25.500459],[23.312097,-25.26869],[23.73357,-25.390129],[24.211267,-25.670216],[25.025171,-25.71967],[25.664666,-25.486816],[25.765849,-25.174845],[25.941652,-24.696373],[26.485753,-24.616327],[26.786407,-24.240691],[27.11941,-23.574323],[28.017236,-22.827754],[29.432188,-22.091313],[29.839037,-22.102216],[30.322883,-22.271612],[30.659865,-22.151567],[31.191409,-22.25151],[31.670398,-23.658969],[31.930589,-24.369417],[31.752408,-25.484284],[31.837778,-25.843332],[31.333158,-25.660191],[31.04408,-25.731452],[30.949667,-26.022649],[30.676609,-26.398078],[30.685962,-26.743845],[31.282773,-27.285879],[31.86806,-27.177927],[32.071665,-26.73382],[32.83012,-26.742192],[32.580265,-27.470158],[32.462133,-28.301011],[32.203389,-28.752405],[31.521001,-29.257387]],[[28.978263,-28.955597],[28.5417,-28.647502],[28.074338,-28.851469],[27.532511,-29.242711],[26.999262,-29.875954],[27.749397,-30.645106],[28.107205,-30.545732],[28.291069,-30.226217],[28.8484,-30.070051],[29.018415,-29.743766],[29.325166,-29.257387],[28.978263,-28.955597]]]}}},395:function(t,e,a){var n,s;a(245),n=a(166);var r=a(408);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,t.exports=n},396:function(t,e,a){var n,s;a(243),n=a(167);var r=a(406);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,t.exports=n},397:function(t,e,a){var n,s;a(244),n=a(170);var r=a(407);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,t.exports=n},398:function(t,e,a){var n,s;a(257),n=a(172);var r=a(420);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,t.exports=n},399:function(t,e,a){var n,s;a(246),n=a(173);var r=a(409);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,t.exports=n},400:function(t,e,a){var n,s;a(249),n=a(174);var r=a(412);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,t.exports=n},401:function(t,e,a){var n,s;a(255),n=a(175);var r=a(418);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,t.exports=n},402:function(t,e,a){var n,s;a(252),n=a(176);var r=a(415);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,t.exports=n},403:function(t,e,a){var n,s;a(248),n=a(177);var r=a(411);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,t.exports=n},404:function(t,e,a){var n,s;a(253),n=a(178);var r=a(416);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,t.exports=n},405:function(t,e,a){var n,s;a(256),n=a(181);var r=a(419);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,t.exports=n},406:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isVisible?a("div",{staticClass:"c-banner"},[a("div",{staticClass:"content"},[a("div",{staticClass:"row align-center"},[a("div",{staticClass:"columns small-12 medium-10"},[a("div",{staticClass:"row"},[a("div",{staticClass:"column small-6 medium-8 align-middle"},[a("h3",{staticClass:"banner-heading -light"},[t._v(t._s(t.heading))]),t._v(" "),a("p",{staticClass:"banner-body",domProps:{innerHTML:t._s(t.body)}})]),t._v(" "),a("div",{staticClass:"column small-6 medium-4"},[a("div",{staticClass:"c-button-group -center"},[a("button-component",{staticClass:"-bordered -big",attrs:{click:t.goToContactForm}},[t._v(t._s(t.actionName))]),t._v(" "),a("button-component",{staticClass:"-bordered dismiss-bg",attrs:{click:t.action}},[t._v("Dismiss")])],1)])])])])])]):t._e()},staticRenderFns:[]}},407:function(t,e){t.exports={render:function(){var t=this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"c-map l-map"},[e("div",{attrs:{id:"map"}})])}]}},408:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:{"modal-open":this.isDataSetsPage},attrs:{id:"app"}},[e("main",{staticClass:"l-main"},[e("router-view")],1)])},staticRenderFns:[]}},409:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return this.open?e("div",{staticClass:"c-modal",on:{click:this.close}},[e("div",{staticClass:"row"},[e("div",{staticClass:"column small-12"},[e("div",{staticClass:"modal-container",on:{click:function(t){t.stopPropagation()}}},[e("button-component",{staticClass:"close-modal",attrs:{click:this.close}},[e("icon-component",{staticClass:"-medium",attrs:{name:"icon-close"}})],1),this._v(" "),e("div",{staticClass:"modal-content"},[this._t("default")],2)],1)])])]):this._e()},staticRenderFns:[]}},410:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("footer",{staticClass:"c-map-footer"},[a("button",{on:{click:t.toggleModal}},[t._v("About the Data")]),t._v(" "),a("a",{attrs:{href:"#"}},[t._v("Learn About DATA4SDGS")]),t._v(" "),t._m(0)]),t._v(" "),a("modal-component",{staticClass:"-center"},[a("div",{staticClass:"row expanded"},[a("div",{staticClass:"column small-12 align-middle flex"},["share"===t.modalContent?a("share-component"):"about"===t.modalContent?a("div",{staticClass:"about-modal-content"},[a("h3",{staticClass:"-clean"},[t._v("About the Data")]),t._v(" "),a("p",[t._v("\n          These two examples were created to test how quickly it\n          would be for a designer and software engineer to make a visualisation based on data from\n          very different sources. The visualisations are intended to be experiments of the API's\n          power, rather than fully fledged visualisations. The data used were:\n        ")]),t._v(" "),a("ul",[a("li",[a("a",{on:{click:function(e){t.goTo("/data-sets/de452a4c-a55c-464d-9037-8c3e9fe48365")}}},[t._v("\n              World Database on Protected Areas - Protected Areas Surface\n            ")])]),t._v(" "),a("li",[a("a",{on:{click:function(e){t.goTo("/data-sets/b3059ff9-0054-4343-a7ac-d7a821d222cd")}}},[t._v("\n            Events or conflicts\n            ")])]),t._v(" "),a("li",[a("a",{on:{click:function(e){t.goTo("/data-sets/ee2c5877-f212-4eb4-a63a-a82ba7e4e168")}}},[t._v("\n              Water basins in South Africa\n            ")])]),t._v(" "),a("li",[a("a",{on:{click:function(e){t.goTo("/data-sets/1c56e5c4-f617-4570-90dd-20724ea674b1")}}},[t._v("\n              Water Transitions\n            ")])]),t._v(" "),a("li",[a("a",{on:{click:function(e){t.goTo("/data-sets/bd47397c-b714-4ced-9fe9-d20b0b353e3f")}}},[t._v("\n              Population in South Africa\n            ")])])])]):t._e()],1)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("a",{attrs:{href:"https://carto.com/",target:"_blank"}},[this._v("CARTO")])])}]}},411:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("aside",{class:{"c-toggle-menu":!0,"l-toggle-menu":!0,"-closed":!0===t.closed}},[a("button",{staticClass:"toggle-menu-btn",attrs:{type:"button"},on:{click:t.toggle}},[a("span")]),t._v(" "),a("div",{staticClass:"c-ranking"},[a("h2",{staticClass:"ranking-title"},[t._v("Regions of South Africa with greatest water risk")]),t._v(" "),a("div",{staticClass:"ranking-content"},[a("table",{staticClass:"ranking-table"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",{on:{click:function(e){t.setSortField("water")}}},[a("span",{class:{"-active":"water"===t.sort.field,"-inverted":!t.sort.direction}},[t._v("\n                Permanent surface water area lost (ha)\n              ")])]),t._v(" "),a("th",{on:{click:function(e){t.setSortField("pop")}}},[a("span",{class:{"-active":"pop"===t.sort.field,"-inverted":!t.sort.direction}},[t._v("\n                Large Population\n              ")])])])]),t._v(" "),a("tbody",t._l(t.basinsList,function(e,n){return a("tr",[a("td",[a("span",[t._v(t._s(n+1))]),t._v(t._s(t.capitalize(e.basin_name)))]),t._v(" "),a("td",[t._v(t._s(e.water))]),t._v(" "),a("td",[t._v(t._s(e.pop))])])}))]),t._v(" "),a("spinner-component",{staticClass:"-relative",attrs:{loading:t.basinsLoading}})],1)])])},staticRenderFns:[]}},412:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"c-legend l-legend"},[a("div",{staticClass:"legend-title"},[a("h3",[t._v("Lost Surface Water")]),t._v(" "),a("button",{attrs:{type:"button"},on:{click:t.toggle}},[a("div",{staticClass:"viel"}),t._v(" "),a("span",{class:{"legend-title-arrow":!0,"-active":t.isOpen}})])]),t._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],staticClass:"legend-list"},t._l(t.items,function(e){return a("li",[a("input",{staticClass:"c-switch",attrs:{id:e.id,type:"checkbox"},domProps:{checked:t.activeItems.includes(e.id)},on:{change:function(a){t.onCboxChange(a,e.id)}}}),t._v(" "),a("label",{attrs:{for:e.id}},[t._v(t._s(e.name))])])}))])},staticRenderFns:[]}},413:function(t,e){t.exports={render:function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"c-button",on:{click:this.click}},[this._t("default")],2)},staticRenderFns:[]}},414:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("aside",{staticClass:"c-sidebar"},[a("div",{staticClass:"sidebar-title"},[a("h4",[t._v("Conflicts related to protected areas")]),t._v(" "),a("button",{attrs:{type:"button"},on:{click:t.openSidebar}},[a("div",{staticClass:"viel"}),t._v(" "),a("span",{class:t.arrowOpen})])]),t._v(" "),a("div",{class:t.contentOpen},[a("div",{staticClass:"layers-switch"},[a("ul",{staticClass:"c-legend"},[a("li",{staticClass:"legend-item"},[a("div",{staticClass:"switch"},[a("input",{ref:"protected_areas",attrs:{type:"checkbox",name:"protected_areas"},on:{click:t.toggleLayer}}),t._v(" "),a("span",{staticClass:"toggle"})]),t._v("\n          Protected Areas\n        ")]),t._v(" "),a("spinner-component",{staticClass:"-absolute",attrs:{loading:t.layerLoading,overlay:!0}})],1)]),t._v(" "),a("div",{staticClass:"legend-spec"},[a("ul",{staticClass:"c-legend"},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("spinner-component",{staticClass:"-absolute",attrs:{loading:t.layerLoading,overlay:!0}})],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"legend-item"},[e("span",{staticClass:"spec -square -pink"}),this._v("\n          Protected Areas Surface\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"legend-item"},[e("span",{staticClass:"spec -dot -yellow"}),this._v("\n          Events or conflicts\n        ")])}]}},415:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"c-other-visualization l-other-visualization"},[e("toggle-menu"),this._v(" "),e("other-map"),this._v(" "),e("map-footer-component")],1)},staticRenderFns:[]}},416:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c-share"},[a("h3",{staticClass:"share-title"},[t._v("Share this page")]),t._v(" "),a("div",{staticClass:"share-url-container"},[a("input",{ref:"copyInput",staticClass:"share-input",attrs:{readonly:"",type:"text"},domProps:{value:t.sharedUrl}}),t._v(" "),a("button",{staticClass:"c-button -filled",attrs:{type:"button"},on:{click:t.handleCopy}},[t._v("Copy")])]),t._v(" "),a("ul",{staticClass:"share-links"},[a("li",{staticClass:"share-links-item"},[a("a",{attrs:{href:t.facebookEncodedUrl,rel:"noopener noreferrer",target:"_blank",type:"button",name:"button"}},[a("icon-component",{staticClass:"-small",attrs:{name:"icon-facebook"}})],1)]),t._v(" "),a("li",{staticClass:"share-links-item"},[a("a",{attrs:{href:t.twitterEncodedUrl,rel:"noopener noreferrer",target:"_blank",type:"button",name:"button"}},[a("icon-component",{staticClass:"-small",attrs:{name:"icon-twitter"}})],1)])])])},staticRenderFns:[]}},417:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"c-icon"},[e("svg",[e("use",{attrs:{"xlink:href":this.selector}})])])},staticRenderFns:[]}},418:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"c-map l-map"},[e("legend-component"),this._v(" "),e("div",{attrs:{id:"map"}})],1)},staticRenderFns:[]}},419:function(t,e){t.exports={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"c-timeline"},[this._v("Timeline!")])},staticRenderFns:[]}},420:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"c-visualization l-visualization"},[e("sidebar-component"),this._v(" "),e("map-component"),this._v(" "),e("map-footer-component")],1)},staticRenderFns:[]}},421:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return this.loading?e("div",{staticClass:"c-spinner"},[this.overlay?e("div",{staticClass:"c-overlay"}):this._e(),this._v(" "),this.loading?e("div",{staticClass:"spinner"},[e("div",{staticClass:"spinner-container"},[e("div",{staticClass:"spinner-content"},[e("icon-component",{staticClass:"-large",attrs:{name:"icon-loader"}})],1)])]):this._e()]):this._e()},staticRenderFns:[]}}});